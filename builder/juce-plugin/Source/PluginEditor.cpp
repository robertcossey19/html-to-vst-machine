#include "PluginProcessor.h"
#include "PluginEditor.h"
#include "BinaryData.h"  // generated by juce_add_binary_data(HtmlToVst_UI ...)

//==============================================================================

HtmlToVstAudioProcessorEditor::HtmlToVstAudioProcessorEditor (HtmlToVstAudioProcessor& p)
    : juce::AudioProcessorEditor (&p),
      processor (p),
      webView (juce::WebBrowserComponent::Options {})
{
    // Size of the plugin window
    setSize (900, 600);

    // Get the embedded HTML from BinaryData
    juce::String html = juce::String::fromUTF8 (BinaryData::ampex_ui_html,
                                                BinaryData::ampex_ui_htmlSize);

    // Simple approach: write HTML to a temp file and point the WebView at it
    juce::File tempFile = juce::File::createTempFile ("ampex_ui.html");
    tempFile.replaceWithText (html);

    addAndMakeVisible (webView);
    webView.goToURL (tempFile.getFullPathName());
}

HtmlToVstAudioProcessorEditor::~HtmlToVstAudioProcessorEditor() = default;

void HtmlToVstAudioProcessorEditor::paint (juce::Graphics& g)
{
    g.fillAll (juce::Colours::black);
}

void HtmlToVstAudioProcessorEditor::resized()
{
    webView.setBounds (getLocalBounds());
}
