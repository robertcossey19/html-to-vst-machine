#include "PluginEditor.h"
#include "BinaryData.h"  // Generated by the HtmlUIData target

using namespace juce;

//==============================================================================

HtmlToVstAudioProcessorEditor::HtmlToVstAudioProcessorEditor (HtmlToVstAudioProcessor& p)
    : AudioProcessorEditor (&p),
      processor (p)
{
    // Size tuned for the ATR-102 UI you embedded
    setSize (1200, 550);

    addAndMakeVisible (webView);
    webView.setOpaque (true);

    // -------------------------------------------------------------------------
    // Load the embedded HTML into the WebBrowserComponent
    // -------------------------------------------------------------------------
    //
    // BinaryData::ampex_ui_html / ampex_ui_htmlSize come from your HTML file
    // that the HtmlUIData target packed. If the symbol name differs, change
    // it here to match the one generated in BinaryData1.cpp.
    //
    const String html (BinaryData::ampex_ui_html,
                       BinaryData::ampex_ui_htmlSize);

    // Turn the raw HTML into a data: URL, properly escaped, so the browser
    // interprets it as HTML instead of showing the escaped text.
    const String escaped = URL::addEscapeChars (html, true);
    const String dataUrl = "data:text/html;charset=utf-8," + escaped;

    webView.goToURL (dataUrl);
}

HtmlToVstAudioProcessorEditor::~HtmlToVstAudioProcessorEditor() = default;

//==============================================================================

void HtmlToVstAudioProcessorEditor::paint (Graphics& g)
{
    // Dark backdrop matching the panel background
    g.fillAll (Colour (0xff1a202c));
}

void HtmlToVstAudioProcessorEditor::resized()
{
    webView.setBounds (getLocalBounds());
}
