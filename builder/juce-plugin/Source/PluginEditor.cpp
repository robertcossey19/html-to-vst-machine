#include "PluginProcessor.h"
#include "PluginEditor.h"
#include "BinaryData.h"  // generated by juce_add_binary_data(HtmlToVst_UI ...)

//==============================================================================

HtmlToVstAudioProcessorEditor::HtmlToVstAudioProcessorEditor (HtmlToVstAudioProcessor& p)
    : juce::AudioProcessorEditor (&p),
      processor (p),
      webView (juce::WebBrowserComponent::Options {})
{
    // Set plugin window size (adjust if needed)
    setSize (1100, 650);

    // Get the embedded HTML from BinaryData (Assets/UI/ampex_ui.html)
    juce::String html = juce::String::fromUTF8 (BinaryData::ampex_ui_html,
                                                BinaryData::ampex_ui_htmlSize);

    // Write HTML to a temp file that WebBrowserComponent can load
    juce::File tempFile = juce::File::getSpecialLocation (juce::File::tempDirectory)
                            .getChildFile ("analogexact_ampex_ui.html");

    // Clean and write fresh
    tempFile.deleteFile();
    tempFile.create();
    tempFile.replaceWithText (html);

    addAndMakeVisible (webView);

    // Load the local HTML file (no remote URL needed)
    webView.goToURL (tempFile.getFullPathName());
}

HtmlToVstAudioProcessorEditor::~HtmlToVstAudioProcessorEditor() = default;

void HtmlToVstAudioProcessorEditor::paint (juce::Graphics& g)
{
    g.fillAll (juce::Colours::black);
}

void HtmlToVstAudioProcessorEditor::resized()
{
    webView.setBounds (getLocalBounds());
}
